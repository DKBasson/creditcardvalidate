{"ast":null,"code":"'use strict';\n\nvar find = require('array-find');\n\nvar btoa = require('btoa-lite');\n\nvar jsonParse = require('pull-json-parse');\n\nvar promiseToPull = require('pull-from-promise');\n\nvar toQs = require('http-querystring-stringify');\n\nvar appendQuery = require('./append-query');\n\nvar responses = require('./responses');\n\nvar isContentType = require('./is-content-type');\n\nvar isAccept = require('./is-accept');\n\nvar ponyFetch = require('./fetch-ponyfill');\n\nvar fetch = typeof window !== 'undefined' && window.fetch || ponyFetch;\nvar FormData = typeof window !== 'undefined' && window.FormData;\nvar File = typeof window !== 'undefined' && window.File;\nvar TextDecoder = typeof window !== 'undefined' && window.TextDecoder;\nvar responseMap = {\n  1: responses.Error,\n  2: responses.Success,\n  3: responses.Error,\n  4: responses.ClientError,\n  5: responses.ServerError\n};\nvar methodsWithoutBody = ['GET', 'DELETE'];\nrequest.response = responses;\nrequest.toQs = toQs;\nrequest.btoa = btoa;\nmodule.exports = request;\n\nfunction request(opts) {\n  var pump = null;\n  var retries = 0;\n  return source;\n\n  function source(abort, cb) {\n    if (abort) return cb && cb(abort);\n    if (pump) return pump(null, cb);\n    send(opts).then(function (response) {\n      var code = response.status;\n      var contentType = response.headers.get('content-type');\n      var json = contentType && contentType.indexOf('json') !== -1;\n      if (!response.ok) return (json ? response.json() : response.text()).then(function (body) {\n        var statusIdentifier = code && code / 100 | 0;\n        var responseType = responseMap[statusIdentifier] || responses.Error;\n        return cb(new responseType(code, response.statusText || 'Connection trouble', null, body));\n      });\n      if (code === 204 || code === 205) return cb(true);\n      pump = json ? pumpJson(response) : pumpBinary(response);\n      return pump(null, cb);\n    }).catch(function (err) {\n      if (!opts.retries) return cb(err);\n      var retry = opts.retries[retries];\n      if (retry === undefined) return cb(err);\n      retries++;\n      if (!retry.delay) return source(null, cb);\n      setTimeout(function () {\n        source(null, cb);\n      }, retry.delay);\n    }).catch(cb);\n  }\n}\n\nfunction send(opts) {\n  var url = typeof opts === 'string' ? opts : appendQuery(opts.url || opts.host + (opts.path || ''), opts.query);\n  var method = opts.method || (opts.data ? 'POST' : 'GET');\n  var headers = opts.headers || {};\n  var data = opts.data;\n  var isMethodWithBody = methodsWithoutBody.indexOf(method) === -1;\n  var headerKeys = Object.keys(headers);\n  var contentTypeHeader = find(headerKeys, isContentType);\n  var acceptHeader = find(headerKeys, isAccept);\n  if (isMethodWithBody && contentTypeHeader === undefined && !(File && data instanceof File) && !(FormData && data instanceof FormData)) headers['Content-Type'] = 'application/json';\n  if (acceptHeader === undefined) headers.Accept = 'application/json';\n  var contentType = headers[contentTypeHeader || 'Content-Type'];\n  var body;\n\n  if (data) {\n    if (!isMethodWithBody) throw new Error('You should not send data for DELETE or GET requests');\n\n    if (contentType === 'application/json') {\n      body = JSON.stringify(data);\n    } else {\n      body = data;\n    }\n  }\n\n  return fetch(url, {\n    method: method,\n    headers: fetch.isPony ? headers : Object.keys(headers).reduce(function (c, key) {\n      c.append(key, headers[key]);\n      return c;\n    }, new Headers()),\n    body: body\n  });\n}\n\nfunction pumpJson(response) {\n  if (response.source) return jsonParse(response.source);\n  var reader = TextDecoder && response.body && response.body.getReader();\n  if (!reader) return jsonParse(promiseToPull(response.text()));\n  var decoder = new TextDecoder();\n  var done = false;\n  return jsonParse(function (abort, cb) {\n    if (abort) {\n      reader.cancel();\n      return cb(abort);\n    }\n\n    if (done) return cb(true);\n    return reader.read().then(function (chunk) {\n      done = chunk.done;\n      return cb(null, decoder.decode(chunk.value || new Uint8Array(), {\n        stream: chunk.done\n      }));\n    }).catch(cb);\n  });\n}\n\nfunction pumpBinary(response) {\n  if (response.source) return response.source;\n  var reader = response.body && response.body.getReader();\n  if (!reader) return promiseToPull(response.text());\n  return function pump(abort, cb) {\n    if (abort) {\n      reader.cancel();\n      return cb(abort);\n    }\n\n    return reader.read().then(function (chunk) {\n      if (chunk.done) return cb(true);\n      return cb(null, chunk.value);\n    }).catch(cb);\n  };\n}","map":{"version":3,"sources":["C:/Users/dekle/Documents/TechAssignments/CreditCardValidate/creditcardvalidate/node_modules/pull-fetch-iso/src/index.js"],"names":["find","require","btoa","jsonParse","promiseToPull","toQs","appendQuery","responses","isContentType","isAccept","ponyFetch","fetch","window","FormData","File","TextDecoder","responseMap","Error","Success","ClientError","ServerError","methodsWithoutBody","request","response","module","exports","opts","pump","retries","source","abort","cb","send","then","code","status","contentType","headers","get","json","indexOf","ok","text","body","statusIdentifier","responseType","statusText","pumpJson","pumpBinary","catch","err","retry","undefined","delay","setTimeout","url","host","path","query","method","data","isMethodWithBody","headerKeys","Object","keys","contentTypeHeader","acceptHeader","Accept","JSON","stringify","isPony","reduce","c","key","append","Headers","reader","getReader","decoder","done","cancel","read","chunk","decode","value","Uint8Array","stream"],"mappings":"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","sourcesContent":["'use strict';\n\nvar find = require('array-find');\nvar btoa = require('btoa-lite');\nvar jsonParse = require('pull-json-parse');\nvar promiseToPull = require('pull-from-promise');\nvar toQs = require('http-querystring-stringify');\n\nvar appendQuery = require('./append-query');\nvar responses = require('./responses');\nvar isContentType = require('./is-content-type');\nvar isAccept = require('./is-accept');\nvar ponyFetch = require('./fetch-ponyfill');\n\nvar fetch = typeof window !== 'undefined' && window.fetch || ponyFetch;\nvar FormData = typeof window !== 'undefined' && window.FormData;\nvar File = typeof window !== 'undefined' && window.File;\nvar TextDecoder = typeof window !== 'undefined' && window.TextDecoder;\n\nvar responseMap = {\n\t1: responses.Error,\n\t2: responses.Success,\n\t3: responses.Error,\n\t4: responses.ClientError,\n\t5: responses.ServerError,\n};\n\nvar methodsWithoutBody = [ 'GET', 'DELETE' ];\n\nrequest.response = responses;\nrequest.toQs = toQs;\nrequest.btoa = btoa;\n\nmodule.exports = request;\n\nfunction request( opts ){\n\tvar pump = null;\n\tvar retries = 0;\n\n\treturn source;\n\n\tfunction source( abort, cb ){\n\t\tif (abort)\n\t\t\treturn cb && cb(abort);\n\n\t\tif (pump)\n\t\t\treturn pump(null, cb);\n\n\t\tsend(opts)\n\t\t\t.then(function( response ){\n\t\t\t\tvar code = response.status;\n\n\t\t\t\tvar contentType = response.headers.get('content-type');\n\n\t\t\t\tvar json = contentType && contentType.indexOf('json') !== -1;\n\n\t\t\t\tif (!response.ok)\n\t\t\t\t\treturn (json ? response.json() : response.text())\n\t\t\t\t\t\t.then(function( body ){\n\t\t\t\t\t\t\tvar statusIdentifier = code && (code / 100 | 0);\n\t\t\t\t\t\t\tvar responseType = responseMap[statusIdentifier] || responses.Error;\n\n\t\t\t\t\t\t\treturn cb(new responseType(code, response.statusText || 'Connection trouble', null, body));\n\t\t\t\t\t\t});\n\n\t\t\t\tif (code === 204 || code === 205)\n\t\t\t\t\treturn cb(true);\n\n\t\t\t\tpump = json\n\t\t\t\t\t? pumpJson(response)\n\t\t\t\t\t: pumpBinary(response);\n\n\t\t\t\treturn pump(null, cb);\n\t\t\t})\n\t\t\t.catch(function( err ){\n\t\t\t\tif (!opts.retries)\n\t\t\t\t\treturn cb(err);\n\n\t\t\t\tvar retry = opts.retries[retries];\n\n\t\t\t\tif (retry === undefined)\n\t\t\t\t\treturn cb(err);\n\n\t\t\t\tretries++;\n\n\t\t\t\tif (!retry.delay)\n\t\t\t\t\treturn source(null, cb);\n\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tsource(null, cb);\n\t\t\t\t}, retry.delay);\n\t\t\t})\n\t\t\t.catch(cb);\n\t}\n}\n\nfunction send( opts ){\n\tvar url = typeof opts === 'string'\n\t\t? opts\n\t\t: appendQuery(opts.url || opts.host+(opts.path || ''), opts.query);\n\n\tvar method = opts.method || (opts.data ? 'POST' : 'GET');\n\tvar headers = opts.headers || {};\n\tvar data = opts.data;\n\n\tvar isMethodWithBody = methodsWithoutBody.indexOf(method) === -1;\n\n\tvar headerKeys = Object.keys(headers);\n\n\tvar contentTypeHeader = find(headerKeys, isContentType);\n\tvar acceptHeader = find(headerKeys, isAccept);\n\n\tif (\n\t\tisMethodWithBody\n\t\t&& contentTypeHeader === undefined\n\t\t&& !(File && data instanceof File)\n\t\t&& !(FormData && data instanceof FormData)\n\t)\n\t\theaders['Content-Type'] = 'application/json';\n\n\tif (acceptHeader === undefined)\n\t\theaders.Accept = 'application/json';\n\n\tvar contentType = headers[contentTypeHeader || 'Content-Type'];\n\n\tvar body;\n\n\tif (data) {\n\t\tif (!isMethodWithBody)\n\t\t\tthrow new Error('You should not send data for DELETE or GET requests');\n\n\t\tif (contentType === 'application/json') {\n\t\t\tbody = JSON.stringify(data);\n\t\t} else {\n\t\t\tbody = data;\n\t\t}\n\t}\n\n\treturn fetch(url, {\n\t\tmethod: method,\n\t\theaders: fetch.isPony\n\t\t\t? headers\n\t\t\t: Object.keys(headers).reduce(function( c, key ){\n\t\t\t\tc.append(key, headers[key]);\n\n\t\t\t\treturn c;\n\t\t\t}, new Headers()),\n\t\tbody: body,\n\t});\n}\n\nfunction pumpJson( response ){\n\tif (response.source)\n\t\treturn jsonParse(response.source);\n\n\tvar reader = TextDecoder && response.body && response.body.getReader();\n\n\tif (!reader)\n\t\treturn jsonParse(promiseToPull(response.text()));\n\n\tvar decoder = new TextDecoder();\n\tvar done = false;\n\n\treturn jsonParse(function( abort, cb ){\n\t\tif (abort) {\n\t\t\treader.cancel();\n\n\t\t\treturn cb(abort);\n\t\t}\n\n\t\tif (done)\n\t\t\treturn cb(true)\n\n\t\treturn reader.read().then(function( chunk ){\n\t\t\tdone = chunk.done;\n\n\t\t\treturn cb(null, decoder.decode(chunk.value || new Uint8Array, {\n\t\t\t\tstream: chunk.done,\n\t\t\t}));\n\t\t}).catch(cb);\n\t});\n}\n\nfunction pumpBinary( response ){\n\tif (response.source)\n\t\treturn response.source;\n\n\tvar reader = response.body && response.body.getReader();\n\n\tif (!reader)\n\t\treturn promiseToPull(response.text());\n\n\treturn function pump( abort, cb ){\n\t\tif (abort) {\n\t\t\treader.cancel();\n\n\t\t\treturn cb(abort);\n\t\t}\n\n\t\treturn reader.read().then(function( chunk ){\n\t\t\tif (chunk.done)\n\t\t\t\treturn cb(true);\n\n\t\t\treturn cb(null, chunk.value);\n\t\t}).catch(cb);\n\t}\n}\n"]},"metadata":{},"sourceType":"script"}